---
title: Arquitectura
description: Comprende la arquitectura de la API de la Blockchain de Stacks.
---
![Arquitectura de la API de la cadena de bloques Stacks](/images/api/architecture.svg)

## Puntos finales RPC

El `stacks-node` tiene su propio conjunto mínimo de puntos finales http conocidos como `RPC endpoints`.

* El `stacks-blockchain-api` permite a los clientes acceder a los puntos finales RPC mediante el proxy de solicitudes a un grupo balanceado de carga de `stacks-nodes`.
* Para obtener más detalles sobre los puntos finales RPC, consulte: [Documentación de Puntos de Conexión RPC](https://github.com/blockstack/stacks-blockchain/blob/master/docs/rpc-endpoints.md)
* Los puntos finales RPC comunes incluyen:
  * `POST /v2/transactions` - Transmitir una transacción
  * `GET /v2/pox` - Recuperar información relevante actual de Prueba de Transferencia (PoX)
  * `POST /v2/contracts/call-read/<contract>/<function>` - Evaluar y devolver el resultado de llamar a una función de Clarity
  * `POST /v2/fees/transaction` - Evaluar una transacción dada y proporcionar datos de estimación de tarifas de transacción
  * `GET /v2/accounts/<address>` - Obtener el nonce actual requerido para crear transacciones

## Puntos finales adicionales

La API de la cadena de bloques Stacks implementa puntos finales adicionales que proporcionan datos no disponibles directamente desde los nodos de Stacks debido a diversas limitaciones.

* El `stacks-node` es posible que no persista ciertos datos o que no los sirva eficientemente a muchos clientes. Por ejemplo, aunque puede devolver el saldo actual de STX de una cuenta, no puede proporcionar un historial de transacciones de la cuenta.
* La API implementa la especificación Rosetta de Coinbase, un estándar abierto diseñado para simplificar la implementación e interacción con blockchain. Se puede encontrar más información en [API de Rosetta](https://www.rosetta-api.org/).
* La API incluye soporte para los puntos finales del Sistema de Nombres de Blockchain (BNS). Los detalles están disponibles en [Documentación de BNS](https://docs.stacks.co/clarity/example-contracts/bns).
* Para las rutas de Express.js, consulte el directorio `/src/api/routes`.

La API crea un servidor http "observador de eventos" que escucha eventos de un "emisor de eventos" de stacks-node.

Los eventos son solicitudes HTTP POST que contienen:

* Bloques
* Transacciones

Subproductos de las transacciones ejecutadas, tales como:

* Transferencias de activos
* Datos de registro de contratos inteligentes
* Datos de costo de ejecución

La API procesa y almacena estos eventos como datos relacionales en PostgreSQL. Para el código del "observador de eventos", consulte `/src/event-stream`.

## OpenAPI y JSON Schema

Todos los endpoints http y las respuestas están definidos en OpenAPI y JSON Schema.

* Ver `/docs/openapi.yaml`
* Estos se utilizan para generar automáticamente la documentación en https://hirosystems.github.io/stacks-blockchain-api/
* Los esquemas JSON se convierten en interfaces de TypeScript, que son utilizadas internamente por el módulo controlador de la base de datos para transformar los resultados de las consultas SQL en las formas de objeto correctas.
* OpenAPI y los esquemas JSON también se utilizan para generar un independiente `@stacks/blockchain-api-client`.

## Configuración de Desarrollo

La forma más fácil/rápida de desarrollar en este repositorio es usando el depurador de VS Code. Utiliza docker-compose para configurar una instancia de stacks-node y Postgres.

Alternativamente, puedes ejecutar `npm run dev:integrated` que hace lo mismo pero sin un depurador.
