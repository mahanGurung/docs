---
title: Escaneando eventos de blockchain
sidebarTitle: Escanear eventos
description: Prueba los predicados escaneando datos históricos de la cadena de bloques antes de implementarlos en producción.
---
Esta guía te muestra cómo usar el modo de escaneo de Chainhook para probar predicados contra datos históricos de blockchain. El escaneo ayuda a validar la lógica de tu predicado y entender qué eventos serán capturados antes de entrar en funcionamiento.

## Escaneo básico

Prueba tu predicado contra datos históricos escaneando la cadena de bloques:

```terminal
$ chainhook predicates scan my-predicate.json --mainnet
```

El comando scan descarga datos de la cadena de bloques desde Hiro Archive (almacenados en caché después de la primera ejecución) y evalúa tu predicado contra cada bloque en el rango especificado.

### Escanear con redes específicas

```terminal
$ chainhook predicates scan predicate.json --mainnet
$ chainhook predicates scan predicate.json --testnet  
$ chainhook predicates scan predicate.json --devnet
```

## Escaneo de rango de bloques

Limitar el escaneo a bloques específicos para pruebas más rápidas y análisis dirigido:

```terminal
$ chainhook predicates scan my-predicate.json \
    --start-block 150000 \
    --end-block 150100 \
    --mainnet
```

### Configurar rangos en predicados

```json block-range-predicate.json
{
  "chain": "stacks",
  "networks": {
    "mainnet": {
      "start_block": 150000,
      "end_block": 151000,
      "if_this": {
        "scope": "contract_call",
        "contract_identifier": "SP2C2YFP12AJZB4MABJBAJ55XECVS7E4PMMZ89YZR.arkadiko-dao"
      }
    }
  }
}
```

Este predicado escanea solo los bloques 150.000 a 151.000, reduciendo significativamente el tiempo de escaneo.

## Configuración de salida

Controla dónde se escriben los resultados del escaneo usando el `then_that` sección.

### Salida de archivo

```json file-output-predicate.json
{
  "then_that": {
    "file_append": {
      "path": "./scan-results.json"
    }
  }
}
```

### Salida de la consola

```json console-output-predicate.json
{
  "then_that": {
    "file_append": {
      "path": "-"  // Writes to stdout
    }
  }
}
```

## Optimización del rendimiento

Acelera tus escaneos siendo específico sobre lo que estás buscando.

### Utilice ámbitos específicos

```json optimized-scope.json
{
  "if_this": {
    "scope": "contract_call",
    "contract_identifier": "SP2C2YFP12AJZB4MABJBAJ55XECVS7E4PMMZ89YZR.arkadiko-dao",
    "method": "collateralize-and-mint"
  }
}
```

Apuntar a contratos y métodos específicos escanea mucho más rápido que ámbitos amplios.

### Limitar ocurrencias

```json limited-occurrences.json
{
  "networks": {
    "mainnet": {
      "expire_after_occurrence": 100,
      "if_this": {
        "scope": "nft_event",
        "actions": ["mint"]
      }
    }
  }
}
```

Detener el escaneo después de encontrar 100 eventos coincidentes.

## Patrones de escaneo comunes

Aprende de estos ejemplos prácticos de escaneo de eventos específicos de blockchain.

### Encuentra el primer despliegue del contrato

```json find-deployment.json
{
  "chain": "stacks",
  "networks": {
    "mainnet": {
      "expire_after_occurrence": 1,
      "if_this": {
        "scope": "contract_deployment",
        "deployer": "SP2C2YFP12AJZB4MABJBAJ55XECVS7E4PMMZ89YZR"
      }
    }
  }
}
```

```terminal
$ chainhook predicates scan find-deployment.json --mainnet
```

### Recopilar actividad de NFT

```json nft-activity.json
{
  "if_this": {
    "scope": "nft_event",
    "asset_identifier": "SP32AEEF6WW5Y0NMJ1S8SBSZDAY8R5J32NBZFPKKZ.free-punks-v0::free-punks",
    "actions": ["mint", "transfer", "burn"]
  },
  "then_that": {
    "file_append": {
      "path": "./nft-activity.json"
    }
  }
}
```

### Monitorear transacciones de direcciones

```json address-monitor.json
{
  "if_this": {
    "scope": "stx_event",
    "actions": ["transfer"],
    "predicate": {
      "or": [
        {
          "equals": {
            "sender": "SP2C2YFP12AJZB4MABJBAJ55XECVS7E4PMMZ89YZR"
          }
        },
        {
          "equals": {
            "recipient": "SP2C2YFP12AJZB4MABJBAJ55XECVS7E4PMMZ89YZR"
          }
        }
      ]
    }
  }
}
```

Rastrea todas las transferencias de STX que involucren una dirección específica como remitente o destinatario.

## Escaneo de depuración

Habilitar la salida detallada para entender por qué los eventos coinciden o no coinciden:

```terminal
$ chainhook predicates scan my-predicate.json --mainnet --verbose
```

## Lecturas adicionales

* [Despliegue en modo de servicio](/tools/chainhook/service-mode)
* [Ejemplos de uso](/tools/chainhook/usage)
