---
title: Crear una alerta
description: Aprende cómo crear una alerta para monitorear las llamadas a funciones de un contrato.
---
## Lo que aprenderás

:::objectives
* Configurar alertas para funciones de contrato
* Configurar notificaciones por correo electrónico y webhook
* Monitorear patrones de uso de contratos
:::

## Requisitos previos

:::prerequisites
* Contratos implementados en la red principal de Stacks (o use cualquier contrato público)
* Una cuenta de la Plataforma Hiro - [Regístrate gratis](https://platform.hiro.so)
:::

## Configurar el monitoreo de contratos

<Steps>
  <Step>
    ### Navegar a monitoreo

    Inicie sesión en el [Plataforma Hiro](https://platform.hiro.so) y cambia a la **Monitor** pestaña.

    Puedes configurar monitoreo de alertas para cualquier contrato en la red principal.
  </Step>

  <Step>
    ### Agregar contrato para monitoreo

    Hacer clic **Agregar contrato** para abrir el modal de búsqueda de contratos.

    Tienes dos opciones:

    * **Entrada manual**: Ingrese el principal del contrato y el nombre del contrato
    * **Conexión de billetera**: Conecta tu billetera para ver tu historial de implementación

    Todos los contratos implementados en la red principal son públicos, por lo que puedes monitorear cualquiera de ellos independientemente de quién los haya implementado.
  </Step>

  <Step>
    ### Ver actividad del contrato

    Una vez agregado, su contrato aparece en Monitoreo de Contratos donde puede:

    * Ver historial de transacciones
    * Ver transacciones pendientes en el mempool
    * Hacer clic **Crear una alerta** para configurar un monitoreo específico
  </Step>

  <Step>
    ### Configurar alertas personalizadas

    Configura alertas para cualquier llamada a función de contrato con condiciones específicas:

    * **Función llamada**: Alertar cuando se llama a una función específica
    * **Con argumentos**: Alertar solo cuando se llame con valores de argumento especificados
    * **Por dirección**: Alertar solo cuando sea llamado por una dirección de billetera específica

    Por ejemplo, monitorear `set-contract-owner`, funciones de transferencia/acuñación/quemado, o cualquier función personalizada que hayas implementado.
  </Step>

  <Step>
    ### Elegir método de notificación

    Seleccione cómo desea recibir alertas:

    * **Notificaciones por correo electrónico**: Reciba alertas en su dirección de correo electrónico
    * **Llamadas de webhook**: Envía a tu punto final de API para flujos de trabajo personalizados

    Puede habilitar varios métodos de notificación para la misma alerta.
  </Step>
</Steps>

## Formato de carga útil de alerta

Las notificaciones por correo electrónico provienen de Hiro Platform `<platform@hiro.so>`.

Los payloads de webhook siguen esta estructura:

<CodeTabs storage="languageSwitcher">
  ```json !! sample.json
  {
    "tx_id": "0xa7f511b3f379efef6fe71d0de57712ed13a89c5b6e24dd049eb2cc9a7c24fcb5",
    "nonce": 5,
    "fee_rate": "250",
    "sender_address": "SP2W9QYAHJNS7YTQY9EK2MSTQGX9E2NDMV766JP9Z",
    "sponsored": false,
    "post_condition_mode": "deny",
    "post_conditions": [
      {
        "type": "stx",
        "condition_code": "sent_equal_to",
        "amount": "3000000",
        "principal": {
          "type_id": "principal_standard",
          "address": "SP2W9QYAHJNS7YTQY9EK2MSTQGX9E2NDMV766JP9Z"
        }
      }
    ],
    "anchor_mode": "any",
    "tx_status": "pending",
    "receipt_time": 1726104636,
    "receipt_time_iso": "2024-09-12T01:30:36.000Z",
    "tx_type": "contract_call",
    "contract_call": {
      "contract_id": "SPHW0EJK5KPDMK03ZX792EMP0Q5J3A39ZMTVZZCY.sample-contract",
      "function_name": "donate",
      "function_signature": "(define-public (donate (amount uint)))",
      "function_args": [
        {
          "hex": "0x01000000000000000000000000002dc6c0",
          "repr": "u3000000",
          "name": "amount",
          "type": "uint"
        }
      ]
    }
  }
  ```

  ```ts !! alert-payload.ts
  interface AlertPayload {
    tx_id: string;
    nonce: number;
    fee_rate: string;
    sender_address: string;
    sponsored: boolean;
    post_condition_mode: string;
    post_conditions: PostCondition[];
    anchor_mode: string;
    tx_status: string;
    receipt_time: number;
    receipt_time_iso: string;
    tx_type: string;
    contract_call: ContractCall;
  }

  interface ContractCall {
    contract_id: string;
    function_name: string;
    function_signature: string;
    function_args: FunctionArg[];
  }

  interface FunctionArg {
    hex: string;
    repr: string;
    name: string;
    type: string;
  }

  interface PostCondition {
    type: string;
    condition_code: string;
    amount: string;
    principal: Principal;
  }

  interface Principal {
    type_id: string;
    address: string;
  }
  ```
</CodeTabs>

:::callout
El `tx_status` siempre devolverá "pending" para las alertas de monitoreo. Las notificaciones se envían cuando las transacciones llegan al mempool, no cuando se confirman en la blockchain.
:::

## Próximos pasos

:::next-steps
* [Plataforma Hiro](https://platform.hiro.so): Crea y gestiona nuevos webhooks en la Plataforma.
* [Chainhook](/tools/chainhook): Aprende sobre el monitoreo avanzado de eventos con Chainhook
:::
